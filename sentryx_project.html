<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="./css/master.css">
    <link rel="stylesheet" href="./css/code.css">
    <link rel='icon' href='./images/favicon.ico' type='image/x-icon'/>
    <title>Sentry-X Project</title>
</head>

<body>
    <div id="div_links">
        <a href="index.html">Back</a>
    </div>
    <div id="div_header">
        <h1>The Sentry-X Project</h1>
        <p><i>Project created June 2017</i></p>
    </div>
    <div id="div_project_content">
        <h3>Introduction</h3>
        <p>The Sentry-X platform's primary use is to manage OTP (one time Pin) codes used by armed response companies to
            gain access to the client's property. This is used in conjunction with a wireless keypad. A 6 digit random
            code
            is issued using the platform. This code is then send to the armed response officer, where the officer enters
            the
            code into the keypad. If the code is successful access is gained.
        </p>
        <h3>Methodologies/Technologies</h3>
        <p>
            This platform is developed using Microsoft's Web development environment.
            The project was set up using the MVC (model view controller) structure used within visual studio IDE.
        </p>
        <h3>System Design</h3>
        <p>The system consists of the following: UI, MySQL Database, Server-Side, and Web API
            <ul>
                <li>Front End</li>
                <li>MySQL Database</li>
                <li>Server-Side Implementation</li>
                <li>Web API</li>
            </ul>
            <u>Front End</u><br />
            The front end is the user interface that the users interact with. The UI was designed using Html, CSS and
            <a href="https://getbootstrap.com/">Bootstrap</a> that is an open source toolkit for controls like
            the buttons, cards, tables, badges, modal dialogs, etc. The web pages are located under the Views section of
            the
            MVC. Some JavaScript was used when passing data between the controller and the modal dialogs before it is
            displayed to the user. Razor which is Microsoft's client side scripting language was also used to do some
            client
            side processing. <br />
            Figure 1 shows the login screen to Sentry-X.<br />

        </p>
        <div id="image_div_fig1">
            <img src="./images/sentry-x.png" />
        </div>
        <div id="div_img_text">
            Figure 1: Sentry-X Login
        </div>
        <p>
            When a client is created a profile and folder are created. The folder is used to store all the keypad files
            that are
            related to that client.
            An encryption format called AES (Advanced Encrytion Standard) is used to encrypt all the infomation in the
            database and
            folders.
            <br />
            <br />
            User priviledges can also be set up. These changes can only be done by a master user. Figure 2 shows the
            table to manage
            the users on the platform.
        </p>
        <div id="image_div_fig1">
            <img src="./images/manage_users.png" />
        </div>
        <div id="div_img_text">
            Figure 2: Manage Users
        </div>
        <p>
            The management of the keypads are also done on the platform. First a Keypad is assigned making use of the
            serial number,
            a valid description is then added to the keypad serial number. This will enable the user to request a code
            for the keypad.
            Basic reports and code limits can also be requested from the platform.
        </p>
        <p>
        <u>MySQL Database</u><br/>
        The database that I used for this project is a MySQL database. This was my first attempt to interface with an RMS type 
        database. But I very quickly got used to phpMyAdmin that is used to manage the database tables.
        Figure 3 shows the tables used
        </p>
        <div id="image_div_fig3">
            <img src="./images/db tables.JPG" />
        </div>
        <div id="div_img_text">
            Figure 3: MySQL Database Tables
        </div>
        <u>Code Snippets</u>
        <p>
            I have included some code snippets of the database methods used to INSERT, SELECT, UPDATE, DELETE
            database records.
        </p>
        <p>This method verifies the Admin Login Details</p>
        <pre>
            <code>
                /// &ltsummary&gt
                /// This method verifies the users login details admin/user
                /// &lt/summary&gt
                /// &ltparam name="entered_username"&gt&lt/param&gt
                /// &ltparam name="entered_password"&gt&lt/param&gt
                /// &ltparam name="entered_priv"&gt&lt/param&gt
                /// &ltreturns&lt&lt/returns&lt
                public bool VerifyAdminLoginDetails(string entered_username, string entered_password, string entered_priv)
                {
                    string username = "";
                    string password = "";
                    string privilege = "";
        
                    using (MySqlConnection cn = new MySqlConnection(connectString))
                    using (MySqlCommand cmd = cn.CreateCommand())
                    {
                        try
                        {
                            cn.Open();
                        }
                        catch (MySqlException)
                        {
        
                        }
                        cmd.CommandText = "SELECT * FROM admin";
                        try
                        {
                            using (MySqlDataReader reader = cmd.ExecuteReader())
                            {
                                reader.Read();
                                username = reader.GetString(reader.GetOrdinal("username"));
                                password = reader.GetString(reader.GetOrdinal("pri_password"));
                                privilege = reader.GetString(reader.GetOrdinal("privilege"));
                            }
                        }
                        catch (Exception)
                        {
        
                        }
                    }
        
                    /* Verify the user credentials */
                    if (entered_username.Equals(username) && entered_password.Equals(password) && entered_priv.Equals(privilege))
                    {
                        return true;
                    }
                    else
                    {
                        return false;
                    }
                }
            </code>
        </pre>
        <p>This method updates the client details</p>
        <pre>
            <code>
                /// &ltsummary&gt
                /// This method updates the client details in the database
                /// &lt/summary&gt
                /// &ltparam name="uClient"&gt&lt/param&gt
                /// &ltreturns>&lt/returns&gt
                public bool DB_UpdateClientDetails(editClient uClient, string company_name)
                {
                    int r = 0;
        
                    using (MySqlConnection cn = new MySqlConnection(connectString))
                    using (MySqlCommand cmd = cn.CreateCommand())
                    {
                        try
                        {
                            cn.Open();
                        }
                        catch (MySqlException)
                        {
        
                        }
        
                        cmd.CommandText = "UPDATE clients SET client_state='" + uClient.client_active + "', company_address='" + 
                        uClient.company_address + "', email_address='" + uClient.email_address + "', contact_person='" + 
                        uClient.company_contact_person + "', contact_number='" + uClient.company_contact_number + 
                        "' WHERE company_name='" + company_name + "'";
        
                        try
                        {
                            r = cmd.ExecuteNonQuery();
                        }
                        catch (MySqlException)
                        {
        
                        }
                    }
        
                    return (r > 0) ? true : false;
                }
            </code>
        </pre>
        <p>
            This method drops a table from the MySQL Database
        </p>
        <pre>
            <code>
                /// &ltsummary&gt
                /// Drop the table from the MySQL Database
                /// &lt/summary&gt
                /// &ltparam name="table_name"&gtname of the table to DROP&lt/param&gt
                public bool DropTableFromDB (string table_name)
                {
                    int r = 0;
        
                    using (MySqlConnection cn = new MySqlConnection(connectString))
                    using (MySqlCommand cmd = cn.CreateCommand())
                    {
                        try
                        {
                            cn.Open();
                        }
                        catch (MySqlException)
                        {
        
                        }
                        cmd.CommandText = "DROP TABLE " + table_name;
        
                        try
                        {
                            r = cmd.ExecuteNonQuery();
                        }
                        catch (MySqlException)
                        {
        
                        }
                    }
        
                    return (r > 0) ? true : false;
                }
            </code>
        </pre>
    </div>
</body>

</html>